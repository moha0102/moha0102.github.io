<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="css/header.css">
        <link rel="stylesheet" href="css/body.css">
        <link rel="stylesheet" href="css/footer.css">
        <link rel="stylesheet" href="css/table.css">
        <link rel="stylesheet" type="text/css"
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <script
            src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>
    <body>
        <div class="wrap">
            <div class="header">
                <div class="header-wrapper">
                    <div class="logo">
                        <img src="images/ident.svg">
                    </div>

                    <div class="nav-menu">
                        <ul>
                            <li>
                                <a href="index.html">
                                    <div class="icon">
                                        <i class="fa fa-home"
                                            aria-hidden="true"></i>
                                    </div>
                                    <div class="name"><span data-text="Hjem">Hjem</span></div>
                                </a>
                            </li>
                            <li>
                                <a href="destinasjon.html">
                                    <div class="icon">
                                        <i class="fa fa-plane"
                                            aria-hidden="true"></i>
                                    </div>
                                    <div class="name"><span
                                            data-text="Destinasjon">Destinasjon</span></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="icon">
                                        <i class="fa fa-globe"
                                            aria-hidden="true"></i>
                                    </div>
                                    <div class="name"><span
                                            data-text="Mine Reiser">Mine Reiser</span></div>
                                </a>
                            </li>
                            <li>
                                <a href="kontakt.html">

                                    <div class="icon">
                                        <i class="fa fa-info"
                                            aria-hidden="true"></i>
                                    </div>
                                    <div class="name"><span
                                            data-text="Kontaktinformasjon">Kontaktinformasjon</span></div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="referanseForm">
                <div class="refForm">
                    <div class="arHome">
                        <i class="fa fa-arrow-left"
                            aria-hidden="true"><a href="index.html">Hjem</a></i>
                    </div>
                    <div class="formText">
                        <h2>Har du et referanse nummer?</h2>
                        <h5 class="refnr">Ditt referanse nummer: <span class="nr"></span></h5>
                        <p>Oppgi referansenummer for Ã¥ sjekke din reise hos oss</p>
                    </div>
                    <div class="formInp">
                        <label class="field field_v1">
                            <input class="field__input" placeholder="e.g.
                                4796700807">
                            <span class="field__label-wrap">
                                <span class="field__label">Referanse nummer</span>
                            </span>
                        </label>
                    </div>

                    <div class="formBtn">
                        <input type="button" id="btn" value="Send inn">
                    </div>
                </div>
                <div class="table-wrap">
                    <table class="table">
                    <thead class="thead-primary">
                    <h2 style="color:#00304D">Dine Reiser!</h2>
                    <tr>
                    <th>#</th>
                    <th>Avgang</th>
                    <th>Ankomst</th>
                    <th>Detaljer</th>
                    <th>Voksne</th>
                    <th>Barn</th>
                    <th>Pris</th>
                    <th>Avlys reise</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                    <th scope="row">1</th>
                    <td class="avgang"></td>
                    <td class="ankomst"></td>
                    <td class="Detaljer"></td>
                    <td class="voksne"></td>
                    <td class="barn"></td>
                    <td class="pris">590,-</td>
                    <td><button class="btn"onclick="slett()">Avlys</button></td>
                    </tr>
                    </tr>
                    </tbody>
                    </table>
                    </div>
            </div>

            </div>

            <footer class="footer-distributed">

                <div class="footer-right">

                    <a href="#"><i class="fa fa-facebook"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                    <a href="#"><i class="fa fa-linkedin"></i></a>
                    <a href="#"><i class="fa fa-github"></i></a>

                </div>

                <div class="footer-left">

                    <p class="footer-links">
                        <a class="link-1" href="index.html">Hjem</a>
                        <a href="destinasjon.html">Destinasjon</a>
                        <a href="#">Mine Reiser</a>
                        <a href="kontakt.html">Kontaktinformasjon</a>
                    </p>

                    <p>Mohammad Visualisering &copy; 2022</p>
                </div>

            </footer>
        </div>
        <script src="js/main.js"></script>
        <script src="js/carousel.js"></script>
        <script>
            let tableWrap = document.getElementsByClassName("table-wrap")[0];
            let refnr = document.getElementsByClassName("refnr")[0];
            let refForm = document.getElementsByClassName("refForm")[0];
            let nr = document.getElementsByClassName("nr")[0];
            let btn = document.getElementById("btn");
        
            window.onload = function() {
                tableWrap.style.display = 'none';
                if (localStorage.getItem("referanse") != null) {
                    refnr.style.display = 'block';
                    nr.innerHTML = `${localStorage.getItem("referanse")}`;
                } else {
                    refnr.style.display = 'none'
                }
            }

            btn.onclick = function() {
                if (localStorage.getItem('referanse') == document.getElementsByClassName("field__input")[0].value) {
                    refnr.style.display = 'none';
                    tableWrap.style.display = 'block';
                    refForm.style.display = "none";
                    nr.innerHTML = `${localStorage.getItem("referanse")}`;
                    for (i = 0; i < 3; i++) {
                        let avgang = document.getElementsByClassName("avgang")[i];
                        let ankomst = document.getElementsByClassName("ankomst")[i];
                        let detaljer = document.getElementsByClassName("Detaljer")[i];
                        let voksne = document.getElementsByClassName("voksne")[i];
                        let barn = document.getElementsByClassName("barn")[i];
                        let random1 = randomTime();
                        let random2 = randomTime();
                        if (random1 < random2) {
                            avgang.innerHTML += `<p style="font-size: 16px">${random1}</p>`;
                            ankomst.innerHTML += `<p style="font-size: 16px">${random2}</p>`;
                        } else {
                            avgang.innerHTML += `<p style="font-size: 16px">${random2}</p>`;
                            ankomst.innerHTML += `<p style="font-size: 16px">${random1}</p>`;
                        }
                        avgang.innerHTML+= `
                        <p style="opacity: .7; font-size: 14px">Dato: ${localStorage.getItem("checkin")}</p>
                        `;
                        avgang.innerHTML+= `
                        <p style="opacity: .6; font-size: 14px">Fra: Oslo</p>
                        `;
                        ankomst.innerHTML+= `
                        <p style="opacity: .6; font-size: 14px">Til: ${localStorage.getItem("dest")}</p>
                        `;
                        detaljer.innerHTML+= `
                        <p style="font-size: 16px">Direkte</p>
                        <p style="opacity: .6; font-size: 14px">Returdato: ${localStorage.getItem("checkout")}</p>
                        `;
                        voksne.innerHTML+= `
                        <p style="font-size: 14px"><strong>${localStorage.getItem("adult")}</strong></p>
                        `;
                        barn.innerHTML+= `
                        <p style="font-size: 14px"><strong>${localStorage.getItem("children")}</strong></p>
                        `;
                    }
                } else {
                    alert("Skriv inn riktig referansenummer!")
                }
            }

            randomTime = () => {
                hrs = Math.round(Math.random()*12);
                mins = Math.round(Math.random()*60);    
                var hFormat = (hrs<10 ? "0" : "");
                var mFormat = (mins<10 ? "0" : "");
                var amPm = (hrs<12 ? "AM" : "PM");
                return String(hFormat+hrs+ ":" +mFormat+mins+ " " +amPm);
            }

            function slett() {
                localStorage.removeItem('referanse');
                localStorage.removeItem("adult");
                localStorage.removeItem("children");
                localStorage.removeItem("dest");
                localStorage.removeItem("hotel");
                localStorage.removeItem("checkin");
                localStorage.removeItem("checkout");
                window.location.href="index.html";
            }

        </script>

    </body>
</html>